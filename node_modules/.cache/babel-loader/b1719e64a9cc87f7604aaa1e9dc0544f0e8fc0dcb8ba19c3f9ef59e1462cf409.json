{"ast":null,"code":"import axios from \"axios\";\nimport jwtDecode from \"jwt-decode\";\nimport Cookies from \"js-cookie\";\nexport default {\n  name: \"accont\",\n  data() {\n    return {\n      endurl: \"https://rechargeapi.azurewebsites.net/\",\n      userId: null,\n      cliente: {\n        name: \"\",\n        cpf: \"\",\n        email: \"\",\n        phone: \"\"\n      },\n      endereco: {\n        cep: \"\",\n        logradouro: \"\",\n        complemento: \"\",\n        bairro: \"\",\n        localidade: \"\",\n        uf: \"\"\n      }\n    };\n  },\n  created() {\n    const jwtCookie = Cookies.get(\"authToken\");\n\n    // Decode JWT token\n    if (jwtCookie) {\n      try {\n        const decodedToken = jwtDecode(jwtCookie);\n        if (decodedToken) {\n          this.jwtDecoded = decodedToken;\n          // Acesse o campo correto do JWT para obter o ID do usuário\n          const userId = decodedToken.Id; // Substitua 'sub' pelo campo correto em seu JWT\n          console.log(\"Token decodificado:\", userId);\n          // Faça uma solicitação Axios para buscar os dados do usuário\n          axios.get(`${this.endurl}/Users/${userId}`).then(response => {\n            // Preencha os dados do usuário no formulário com base na resposta\n            this.cliente = response.data;\n            console.log(\"Cliente:\", this.cliente);\n          }).catch(error => {\n            console.error(\"Erro ao buscar os dados do usuário:\", error);\n          });\n        }\n      } catch (error) {\n        console.error(\"Erro ao decodificar o JWT:\", error);\n      }\n    }\n  },\n  methods: {\n    async fetchUserData() {\n      try {\n        const response = await axios.get(`${this.endurl}/Users/${this.userId}`);\n        // Manipule os dados do usuário aqui e preencha o formulário\n      } catch (error) {\n        console.error(\"Erro ao buscar dados do usuário:\", error);\n      }\n    },\n    async buscarCep() {\n      try {\n        const response = await axios.get(`${this.endereco}/Address/viacep/${this.endereco.cep}`);\n        const data = response.data;\n\n        // Atualize os campos do endereço com os dados obtidos\n        this.endereco.logradouro = data.logradouro || \"\";\n        this.endereco.complemento = data.complemento || \"\";\n        this.endereco.bairro = data.bairro || \"\";\n        this.endereco.localidade = data.localidade || \"\";\n        this.endereco.uf = data.uf || \"\";\n      } catch (error) {\n        console.error(\"Erro ao buscar o CEP:\", error);\n        // Trate os erros de acordo com as necessidades do seu projeto\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","jwtDecode","Cookies","name","data","endurl","userId","cliente","cpf","email","phone","endereco","cep","logradouro","complemento","bairro","localidade","uf","created","jwtCookie","get","decodedToken","jwtDecoded","Id","console","log","then","response","catch","error","methods","fetchUserData","buscarCep"],"sources":["C:\\Users\\11\\Desktop\\frontend\\src\\components\\Accont.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"row justify-content-center mt-5\">\r\n      <div class=\"col-md-8\">\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">\r\n            <h2 class=\"mb-0\">Sua Conta</h2>\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <form>\r\n              <!-- Informações Pessoais -->\r\n              <h4 class=\"mb-3\">Informações Pessoais</h4>\r\n              <div class=\"form-group\">\r\n                <label for=\"nome\">Nome:</label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"nome\"\r\n                  v-model=\"cliente.name\"\r\n                  class=\"form-control\"\r\n                  placeholder=\"Seu Nome\"\r\n                />\r\n              </div>\r\n\r\n              <div class=\"form-group\">\r\n                <label for=\"cpf\">CPF:</label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"cpf\"\r\n                  v-model=\"cliente.cpf\"\r\n                  class=\"form-control\"\r\n                  placeholder=\"Seu CPF\"\r\n                />\r\n              </div>\r\n\r\n              <div class=\"form-group\">\r\n                <label for=\"telefone\">Telefone:</label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"telefone\"\r\n                  v-model=\"cliente.phone\"\r\n                  class=\"form-control\"\r\n                  placeholder=\"Seu Telefone\"\r\n                />\r\n              </div>\r\n\r\n              <div class=\"form-group\">\r\n                <label for=\"email\">Email:</label>\r\n                <input\r\n                  type=\"email\"\r\n                  id=\"email\"\r\n                  v-model=\"cliente.email\"\r\n                  class=\"form-control\"\r\n                  placeholder=\"Seu Email\"\r\n                />\r\n              </div>\r\n\r\n              <!-- Campos de Endereço -->\r\n              <h4 class=\"mb-3\">Endereço</h4>\r\n              <div class=\"form-group\">\r\n                <label for=\"cep\">CEP:</label>\r\n                <div class=\"input-group\">\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"cep\"\r\n                    v-model=\"endereco.cep\"\r\n                    class=\"form-control\"\r\n                    placeholder=\"Seu CEP\"\r\n                  />\r\n                  <div class=\"input-group-append\">\r\n                    <button\r\n                      type=\"button\"\r\n                      class=\"btn btn-secondary\"\r\n                      @click=\"buscarCep\"\r\n                    >\r\n                      Buscar\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"form-group\">\r\n                <label for=\"logradouro\">Logradouro:</label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"logradouro\"\r\n                  v-model=\"endereco.logradouro\"\r\n                  class=\"form-control\"\r\n                  placeholder=\"Seu Logradouro\"\r\n                />\r\n              </div>\r\n\r\n              <div class=\"form-group\">\r\n                <label for=\"complemento\">Complemento:</label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"complemento\"\r\n                  v-model=\"endereco.complemento\"\r\n                  class=\"form-control\"\r\n                  placeholder=\"Seu Complemento\"\r\n                />\r\n              </div>\r\n\r\n              <div class=\"form-group\">\r\n                <label for=\"bairro\">Bairro:</label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"bairro\"\r\n                  v-model=\"endereco.bairro\"\r\n                  class=\"form-control\"\r\n                  placeholder=\"Seu Bairro\"\r\n                />\r\n              </div>\r\n\r\n              <div class=\"form-group\">\r\n                <label for=\"localidade\">Localidade:</label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"localidade\"\r\n                  v-model=\"endereco.localidade\"\r\n                  class=\"form-control\"\r\n                  placeholder=\"Sua Localidade\"\r\n                />\r\n              </div>\r\n\r\n              <div class=\"form-group\">\r\n                <label for=\"uf\">UF:</label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"uf\"\r\n                  v-model=\"endereco.uf\"\r\n                  class=\"form-control\"\r\n                  placeholder=\"Sua UF\"\r\n                />\r\n              </div>\r\n\r\n              <button type=\"submit\" class=\"btn btn-primary btn-block\">\r\n                Salvar\r\n              </button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport jwtDecode from \"jwt-decode\";\r\nimport Cookies from \"js-cookie\";\r\n\r\nexport default {\r\n  name: \"accont\",\r\n  data() {\r\n    return {\r\n      endurl: \"https://rechargeapi.azurewebsites.net/\",\r\n      userId: null,\r\n\r\n      cliente: {\r\n        name: \"\",\r\n        cpf: \"\",\r\n        email: \"\",\r\n        phone: \"\",\r\n      },\r\n      endereco: {\r\n        cep: \"\",\r\n        logradouro: \"\",\r\n        complemento: \"\",\r\n        bairro: \"\",\r\n        localidade: \"\",\r\n        uf: \"\",\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    const jwtCookie = Cookies.get(\"authToken\");\r\n\r\n    // Decode JWT token\r\n    if (jwtCookie) {\r\n      try {\r\n        const decodedToken = jwtDecode(jwtCookie);\r\n\r\n        if (decodedToken) {\r\n          this.jwtDecoded = decodedToken;\r\n          // Acesse o campo correto do JWT para obter o ID do usuário\r\n          const userId = decodedToken.Id; // Substitua 'sub' pelo campo correto em seu JWT\r\n          console.log(\"Token decodificado:\", userId);\r\n          // Faça uma solicitação Axios para buscar os dados do usuário\r\n          axios\r\n            .get(`${this.endurl}/Users/${userId}`)\r\n            .then((response) => {\r\n              // Preencha os dados do usuário no formulário com base na resposta\r\n              this.cliente = response.data;\r\n              console.log(\"Cliente:\", this.cliente);\r\n            })\r\n            .catch((error) => {\r\n              console.error(\"Erro ao buscar os dados do usuário:\", error);\r\n            });\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Erro ao decodificar o JWT:\", error);\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    async fetchUserData() {\r\n      try {\r\n        const response = await axios.get(\r\n          `${this.endurl}/Users/${this.userId}`\r\n        );\r\n        // Manipule os dados do usuário aqui e preencha o formulário\r\n      } catch (error) {\r\n        console.error(\"Erro ao buscar dados do usuário:\", error);\r\n      }\r\n    },\r\n    async buscarCep() {\r\n      try {\r\n        const response = await axios.get(`${this.endereco}/Address/viacep/${this.endereco.cep}`);\r\n        const data = response.data;\r\n\r\n        // Atualize os campos do endereço com os dados obtidos\r\n        this.endereco.logradouro = data.logradouro || \"\";\r\n        this.endereco.complemento = data.complemento || \"\";\r\n        this.endereco.bairro = data.bairro || \"\";\r\n        this.endereco.localidade = data.localidade || \"\";\r\n        this.endereco.uf = data.uf || \"\";\r\n      } catch (error) {\r\n        console.error(\"Erro ao buscar o CEP:\", error);\r\n        // Trate os erros de acordo com as necessidades do seu projeto\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style></style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}