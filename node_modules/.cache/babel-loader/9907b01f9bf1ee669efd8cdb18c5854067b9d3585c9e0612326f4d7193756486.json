{"ast":null,"code":"import { createRouter, createWebHistory } from \"vue-router\";\nimport Cookies from \"js-cookie\";\nimport jwtDecode from \"jwt-decode\";\nimport Checkout from \"../components/CheckOut.vue\";\n\n// Importe os componentes\nimport HomeView from \"../views/HomeView.vue\";\nconst Dashboard = () => import(\"../components/Dashboard.vue\");\nconst NotFound = () => import(\"../components/404.vue\");\nconst routes = [{\n  path: \"/\",\n  name: \"home\",\n  component: HomeView\n}, {\n  path: \"/CadastroProduto\",\n  name: \"CadastroProduto\",\n  component: () => import(\"../views/PainelAdm/CadastroProduto.vue\"),\n  meta: {\n    requiresAuth: true\n  } // Indica que essa rota requer autenticação\n}, {\n  path: \"/CadastroCategoria\",\n  name: \"CadastroCategoria\",\n  component: () => import(\"../views/PainelAdm/CadastroCategoria.vue\"),\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: \"/Produtos\",\n  name: \"Produtos\",\n  component: () => import(\"../components/Produto.vue\")\n}, {\n  path: \"/Login\",\n  name: \"Login\",\n  component: () => import(\"../components/Login.vue\")\n}, {\n  path: \"/Register\",\n  name: \"Register\",\n  component: () => import(\"../components/Register.vue\")\n}, {\n  path: \"/CadastroMarca\",\n  name: \"CadastroMarca\",\n  component: () => import(\"../views/PainelAdm/CadastroMarca.vue\"),\n  meta: {\n    requiresAuth: true\n  } // Indica que essa rota requer autenticação\n}, {\n  path: \"/neworders\",\n  name: \"NewOrders\",\n  component: () => import(\"../views/PainelAdm/Neworder.vue\"),\n  meta: {\n    requiresAuth: true\n  } // Indica que essa rota requer autenticação\n}, {\n  path: \"/404\",\n  name: \"404\",\n  component: NotFound\n}, {\n  path: \"/Dashboard\",\n  name: \"Dashboard\",\n  component: Dashboard,\n  meta: {\n    requiresAuth: true\n  } // Indica que essa rota requer autenticação\n}, {\n  path: \"/TermsPolitic\",\n  name: \"TermsPolitic\",\n  component: () => import(\"../views/TermsPolitic.vue\")\n}, {\n  path: \"/checkout\",\n  name: \"checkout\",\n  component: Checkout // Use o componente Checkout.vue para esta rota\n}];\n\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes\n});\nrouter.beforeEach(async (to, from, next) => {\n  if (to.meta.requiresAuth) {\n    const authToken = Cookies.get(\"authToken\");\n    if (!authToken) {\n      // Se não houver token de autenticação, redirecione o usuário para a página de login\n      next(\"/login\");\n    } else {\n      try {\n        // Decodifique o token JWT para obter a ID do usuário\n        const decodedToken = jwtDecode(authToken);\n        const userIdFromToken = decodedToken.userId;\n        console.log(\"ID do usuário do token JWT:\", userIdFromToken);\n        // Realize uma verificação para permitir o acesso apenas ao usuário administrador\n        if (userIdFromToken === \"9e72bbd1-55ea-44a0-a8ca-02d09e2ce8b6\") {\n          // O usuário está autenticado e tem permissão, permita o acesso à rota\n          next();\n        } else {\n          // Se o ID do usuário do token JWT não corresponder ao ID do administrador, redirecione o usuário para a página inicial ou outra página apropriada\n          next(\"/\");\n        }\n      } catch (error) {\n        console.error(\"Erro ao decodificar o token JWT:\", error);\n        // Em caso de erro ao decodificar o token JWT, redirecione o usuário para a página de login ou outra página de erro\n        next(\"/login\");\n      }\n    }\n  } else {\n    // Se a rota não requer autenticação, permita o acesso à rota\n    next();\n  }\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","Cookies","jwtDecode","Checkout","HomeView","Dashboard","NotFound","routes","path","name","component","meta","requiresAuth","router","history","process","env","BASE_URL","beforeEach","to","from","next","authToken","get","decodedToken","userIdFromToken","userId","console","log","error"],"sources":["C:/Users/11/Desktop/frontend/src/router/index.js"],"sourcesContent":["import { createRouter, createWebHistory } from \"vue-router\";\r\nimport Cookies from \"js-cookie\";\r\nimport jwtDecode from \"jwt-decode\";\r\nimport Checkout from \"../components/CheckOut.vue\";\r\n\r\n// Importe os componentes\r\nimport HomeView from \"../views/HomeView.vue\";\r\nconst Dashboard = () => import(\"../components/Dashboard.vue\");\r\nconst NotFound = () => import(\"../components/404.vue\");\r\n\r\nconst routes = [\r\n  {\r\n    path: \"/\",\r\n    name: \"home\",\r\n    component: HomeView,\r\n  },\r\n  {\r\n    path: \"/CadastroProduto\",\r\n    name: \"CadastroProduto\",\r\n    component: () => import(\"../views/PainelAdm/CadastroProduto.vue\"),\r\n    meta: { requiresAuth: true }, // Indica que essa rota requer autenticação\r\n  },\r\n  {\r\n    path: \"/CadastroCategoria\",\r\n    name: \"CadastroCategoria\",\r\n    component: () => import(\"../views/PainelAdm/CadastroCategoria.vue\"),\r\n    meta: { requiresAuth: true },\r\n  },\r\n  {\r\n    path: \"/Produtos\",\r\n    name: \"Produtos\",\r\n    component: () => import(\"../components/Produto.vue\"),\r\n  },\r\n  {\r\n    path: \"/Login\",\r\n    name: \"Login\",\r\n    component: () => import(\"../components/Login.vue\"),\r\n    \r\n  },\r\n  {\r\n    path: \"/Register\",\r\n    name: \"Register\",\r\n    component: () => import(\"../components/Register.vue\"),\r\n    \r\n  },\r\n  {\r\n    path: \"/CadastroMarca\",\r\n    name: \"CadastroMarca\",\r\n    component: () => import(\"../views/PainelAdm/CadastroMarca.vue\"),\r\n    meta: { requiresAuth: true }, // Indica que essa rota requer autenticação\r\n  },\r\n  {\r\n    path: \"/neworders\",\r\n    name: \"NewOrders\",\r\n    component: () => import(\"../views/PainelAdm/Neworder.vue\"),\r\n    meta: { requiresAuth: true }, // Indica que essa rota requer autenticação\r\n  },\r\n  {\r\n    path: \"/404\",\r\n    name: \"404\",\r\n    component: NotFound,\r\n  },\r\n  {\r\n    path: \"/Dashboard\",\r\n    name: \"Dashboard\",\r\n    component: Dashboard,\r\n    meta: { requiresAuth: true }, // Indica que essa rota requer autenticação\r\n  },\r\n  {\r\n    path: \"/TermsPolitic\",\r\n    name: \"TermsPolitic\",\r\n    component: () => import(\"../views/TermsPolitic.vue\"),\r\n  },\r\n  {\r\n    path: \"/checkout\",\r\n    name: \"checkout\",\r\n    component: Checkout, // Use o componente Checkout.vue para esta rota\r\n  },\r\n];\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(process.env.BASE_URL),\r\n  routes,\r\n});\r\n\r\nrouter.beforeEach(async (to, from, next) => {\r\n  if (to.meta.requiresAuth) {\r\n    const authToken = Cookies.get(\"authToken\");\r\n\r\n    if (!authToken) {\r\n      // Se não houver token de autenticação, redirecione o usuário para a página de login\r\n      next(\"/login\");\r\n    } else {\r\n      try {\r\n        // Decodifique o token JWT para obter a ID do usuário\r\n        const decodedToken = jwtDecode(authToken);\r\n        const userIdFromToken = decodedToken.userId;\r\n        console.log(\"ID do usuário do token JWT:\", userIdFromToken);\r\n        // Realize uma verificação para permitir o acesso apenas ao usuário administrador\r\n        if (userIdFromToken === \"9e72bbd1-55ea-44a0-a8ca-02d09e2ce8b6\") {\r\n          // O usuário está autenticado e tem permissão, permita o acesso à rota\r\n          next();\r\n        } else {\r\n          // Se o ID do usuário do token JWT não corresponder ao ID do administrador, redirecione o usuário para a página inicial ou outra página apropriada\r\n          next(\"/\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Erro ao decodificar o token JWT:\", error);\r\n        // Em caso de erro ao decodificar o token JWT, redirecione o usuário para a página de login ou outra página de erro\r\n        next(\"/login\");\r\n      }\r\n    }\r\n  } else {\r\n    // Se a rota não requer autenticação, permita o acesso à rota\r\n    next();\r\n  }\r\n});\r\n\r\nexport default router;"],"mappings":"AAAA,SAASA,YAAY,EAAEC,gBAAgB,QAAQ,YAAY;AAC3D,OAAOC,OAAO,MAAM,WAAW;AAC/B,OAAOC,SAAS,MAAM,YAAY;AAClC,OAAOC,QAAQ,MAAM,4BAA4B;;AAEjD;AACA,OAAOC,QAAQ,MAAM,uBAAuB;AAC5C,MAAMC,SAAS,GAAGA,CAAA,KAAM,MAAM,CAAC,6BAA6B,CAAC;AAC7D,MAAMC,QAAQ,GAAGA,CAAA,KAAM,MAAM,CAAC,uBAAuB,CAAC;AAEtD,MAAMC,MAAM,GAAG,CACb;EACEC,IAAI,EAAE,GAAG;EACTC,IAAI,EAAE,MAAM;EACZC,SAAS,EAAEN;AACb,CAAC,EACD;EACEI,IAAI,EAAE,kBAAkB;EACxBC,IAAI,EAAE,iBAAiB;EACvBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,wCAAwC,CAAC;EACjEC,IAAI,EAAE;IAAEC,YAAY,EAAE;EAAK,CAAC,CAAE;AAChC,CAAC,EACD;EACEJ,IAAI,EAAE,oBAAoB;EAC1BC,IAAI,EAAE,mBAAmB;EACzBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,0CAA0C,CAAC;EACnEC,IAAI,EAAE;IAAEC,YAAY,EAAE;EAAK;AAC7B,CAAC,EACD;EACEJ,IAAI,EAAE,WAAW;EACjBC,IAAI,EAAE,UAAU;EAChBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,2BAA2B;AACrD,CAAC,EACD;EACEF,IAAI,EAAE,QAAQ;EACdC,IAAI,EAAE,OAAO;EACbC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,yBAAyB;AAEnD,CAAC,EACD;EACEF,IAAI,EAAE,WAAW;EACjBC,IAAI,EAAE,UAAU;EAChBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,4BAA4B;AAEtD,CAAC,EACD;EACEF,IAAI,EAAE,gBAAgB;EACtBC,IAAI,EAAE,eAAe;EACrBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,sCAAsC,CAAC;EAC/DC,IAAI,EAAE;IAAEC,YAAY,EAAE;EAAK,CAAC,CAAE;AAChC,CAAC,EACD;EACEJ,IAAI,EAAE,YAAY;EAClBC,IAAI,EAAE,WAAW;EACjBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,iCAAiC,CAAC;EAC1DC,IAAI,EAAE;IAAEC,YAAY,EAAE;EAAK,CAAC,CAAE;AAChC,CAAC,EACD;EACEJ,IAAI,EAAE,MAAM;EACZC,IAAI,EAAE,KAAK;EACXC,SAAS,EAAEJ;AACb,CAAC,EACD;EACEE,IAAI,EAAE,YAAY;EAClBC,IAAI,EAAE,WAAW;EACjBC,SAAS,EAAEL,SAAS;EACpBM,IAAI,EAAE;IAAEC,YAAY,EAAE;EAAK,CAAC,CAAE;AAChC,CAAC,EACD;EACEJ,IAAI,EAAE,eAAe;EACrBC,IAAI,EAAE,cAAc;EACpBC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,2BAA2B;AACrD,CAAC,EACD;EACEF,IAAI,EAAE,WAAW;EACjBC,IAAI,EAAE,UAAU;EAChBC,SAAS,EAAEP,QAAQ,CAAE;AACvB,CAAC,CACF;;AAED,MAAMU,MAAM,GAAGd,YAAY,CAAC;EAC1Be,OAAO,EAAEd,gBAAgB,CAACe,OAAO,CAACC,GAAG,CAACC,QAAQ,CAAC;EAC/CV;AACF,CAAC,CAAC;AAEFM,MAAM,CAACK,UAAU,CAAC,OAAOC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EAC1C,IAAIF,EAAE,CAACR,IAAI,CAACC,YAAY,EAAE;IACxB,MAAMU,SAAS,GAAGrB,OAAO,CAACsB,GAAG,CAAC,WAAW,CAAC;IAE1C,IAAI,CAACD,SAAS,EAAE;MACd;MACAD,IAAI,CAAC,QAAQ,CAAC;IAChB,CAAC,MAAM;MACL,IAAI;QACF;QACA,MAAMG,YAAY,GAAGtB,SAAS,CAACoB,SAAS,CAAC;QACzC,MAAMG,eAAe,GAAGD,YAAY,CAACE,MAAM;QAC3CC,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEH,eAAe,CAAC;QAC3D;QACA,IAAIA,eAAe,KAAK,sCAAsC,EAAE;UAC9D;UACAJ,IAAI,CAAC,CAAC;QACR,CAAC,MAAM;UACL;UACAA,IAAI,CAAC,GAAG,CAAC;QACX;MACF,CAAC,CAAC,OAAOQ,KAAK,EAAE;QACdF,OAAO,CAACE,KAAK,CAAC,kCAAkC,EAAEA,KAAK,CAAC;QACxD;QACAR,IAAI,CAAC,QAAQ,CAAC;MAChB;IACF;EACF,CAAC,MAAM;IACL;IACAA,IAAI,CAAC,CAAC;EACR;AACF,CAAC,CAAC;AAEF,eAAeR,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}