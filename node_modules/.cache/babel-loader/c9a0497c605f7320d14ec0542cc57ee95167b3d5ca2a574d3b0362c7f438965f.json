{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-ef68022e\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"email\"\n}, \"Email:\", -1 /* HOISTED */));\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"password\"\n}, \"Senha:\", -1 /* HOISTED */));\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\"\n}, \"Entrar\", -1 /* HOISTED */));\nconst _hoisted_4 = {\n  key: 0,\n  class: \"modal\"\n};\nconst _hoisted_5 = {\n  class: \"modal-content\"\n};\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"Esta aplicação deseja armazenar um token de autenticação no seu navegador. Você aceita?\", -1 /* HOISTED */));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $setup.submit && $setup.submit(...args), [\"prevent\"]))\n  }, [_createCommentVNode(\" Campos de login: email e senha \"), _hoisted_1, _withDirectives(_createElementVNode(\"input\", {\n    type: \"email\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.credentials.email = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.credentials.email]]), _hoisted_2, _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.credentials.password = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.credentials.password]]), _hoisted_3], 32 /* HYDRATE_EVENTS */), _createCommentVNode(\" Modal de aviso de armazenamento \"), $setup.showStorageNotice ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _createElementVNode(\"button\", {\n    onClick: _cache[3] || (_cache[3] = (...args) => $setup.acceptStorage && $setup.acceptStorage(...args))\n  }, \"Aceitar\"), _createElementVNode(\"button\", {\n    onClick: _cache[4] || (_cache[4] = (...args) => $setup.declineStorage && $setup.declineStorage(...args))\n  }, \"Recusar\")])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["_createElementVNode","for","type","class","_createElementBlock","onSubmit","_cache","_withModifiers","args","$setup","submit","_createCommentVNode","_hoisted_1","credentials","email","$event","required","_hoisted_2","password","_hoisted_3","showStorageNotice","_hoisted_4","_hoisted_5","_hoisted_6","onClick","acceptStorage","declineStorage"],"sources":["C:\\Users\\11\\Desktop\\frontend\\src\\components\\Login.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <form @submit.prevent=\"submit\">\r\n      <!-- Campos de login: email e senha -->\r\n      <label for=\"email\">Email:</label>\r\n      <input type=\"email\" v-model=\"credentials.email\" required>\r\n\r\n      <label for=\"password\">Senha:</label>\r\n      <input type=\"password\" v-model=\"credentials.password\" required>\r\n\r\n      <button type=\"submit\">Entrar</button>\r\n    </form>\r\n\r\n    <!-- Modal de aviso de armazenamento -->\r\n    <div v-if=\"showStorageNotice\" class=\"modal\">\r\n      <div class=\"modal-content\">\r\n        <p>Esta aplicação deseja armazenar um token de autenticação no seu navegador. Você aceita?</p>\r\n        <button @click=\"acceptStorage\">Aceitar</button>\r\n        <button @click=\"declineStorage\">Recusar</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue';\r\nimport axios from 'axios';\r\nimport Swal from 'sweetalert2'; // Certifique-se de importar o Swal corretamente\r\nimport Cookies from 'js-cookie';\r\n\r\nexport default {\r\n  name: \"Login\",\r\n  setup() {\r\n    const credentials = ref({\r\n      email: '',\r\n      password: '',\r\n    });\r\n\r\n    const showStorageNotice = ref(false);\r\n    let authToken = ''; // Variável para armazenar o token\r\n\r\n    const submit = async () => {\r\n      if (!checkValidation()) {\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const response = await axios.post('https://localhost:3000/Users/Login', credentials.value, {\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        });\r\n        console.log(\"Login bem-sucedido\");\r\n        \r\n        // Supondo que a API retorne um token após o login bem-sucedido\r\n        authToken = response.data.token;\r\n\r\n        // Exibir o aviso de armazenamento\r\n        showStorageNotice.value = true;\r\n      } catch (error) {\r\n        console.error('Erro ao fazer login:', error);\r\n        Swal.fire(\"Falha no login. Por favor, verifique suas credenciais.\");\r\n      }\r\n    };\r\n\r\n    const checkValidation = () => {\r\n      if (!credentials.value.email) {\r\n        Swal.fire(\"Por favor, informe seu email.\");\r\n        return false;\r\n      }\r\n      \r\n      if (!credentials.value.password) {\r\n        Swal.fire(\"Por favor, informe sua senha.\");\r\n        return false;\r\n      }\r\n\r\n      return true;\r\n    };\r\n\r\n    const acceptStorage = () => {\r\n      // Armazenar o token em um cookie\r\n      Cookies.set('authToken', authToken);\r\n\r\n      // Redirecionar para a rota apropriada após o login bem-sucedido\r\n      this.$router.push('/dashboard');\r\n\r\n      // Fechar o aviso de armazenamento\r\n      showStorageNotice.value = false;\r\n    };\r\n\r\n    const declineStorage = () => {\r\n      // Fechar o aviso de armazenamento\r\n      showStorageNotice.value = false;\r\n    };\r\n\r\n    return {\r\n      credentials,\r\n      showStorageNotice,\r\n      submit,\r\n      checkValidation,\r\n      acceptStorage,\r\n      declineStorage,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.container{\r\n    max-width: 360px;\r\n    }\r\n\r\n</style>"],"mappings":";;gEAIMA,mBAAA,CAAiC;EAA1BC,GAAG,EAAC;AAAO,GAAC,QAAM;gEAGzBD,mBAAA,CAAoC;EAA7BC,GAAG,EAAC;AAAU,GAAC,QAAM;gEAG5BD,mBAAA,CAAqC;EAA7BE,IAAI,EAAC;AAAQ,GAAC,QAAM;;;EAIAC,KAAK,EAAC;;;EAC7BA,KAAK,EAAC;AAAe;gEACxBH,mBAAA,CAA8F,WAA3F,yFAAuF;;;uBAfhGI,mBAAA,CAoBM,cAnBJJ,mBAAA,CASO;IATAK,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAUC,MAAA,CAAAC,MAAA,IAAAD,MAAA,CAAAC,MAAA,IAAAF,IAAA,CAAM;MAC3BG,mBAAA,oCAAuC,EACvCC,UAAiC,E,gBACjCZ,mBAAA,CAAyD;IAAlDE,IAAI,EAAC,OAAO;+DAAUO,MAAA,CAAAI,WAAW,CAACC,KAAK,GAAAC,MAAA;IAAEC,QAAQ,EAAR;iDAAnBP,MAAA,CAAAI,WAAW,CAACC,KAAK,E,GAE9CG,UAAoC,E,gBACpCjB,mBAAA,CAA+D;IAAxDE,IAAI,EAAC,UAAU;+DAAUO,MAAA,CAAAI,WAAW,CAACK,QAAQ,GAAAH,MAAA;IAAEC,QAAQ,EAAR;iDAAtBP,MAAA,CAAAI,WAAW,CAACK,QAAQ,E,GAEpDC,UAAqC,C,4BAGvCR,mBAAA,qCAAwC,EAC7BF,MAAA,CAAAW,iBAAiB,I,cAA5BhB,mBAAA,CAMM,OANNiB,UAMM,GALJrB,mBAAA,CAIM,OAJNsB,UAIM,GAHJC,UAA8F,EAC9FvB,mBAAA,CAA+C;IAAtCwB,OAAK,EAAAlB,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEC,MAAA,CAAAgB,aAAA,IAAAhB,MAAA,CAAAgB,aAAA,IAAAjB,IAAA,CAAa;KAAE,SAAO,GACtCR,mBAAA,CAAgD;IAAvCwB,OAAK,EAAAlB,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEC,MAAA,CAAAiB,cAAA,IAAAjB,MAAA,CAAAiB,cAAA,IAAAlB,IAAA,CAAc;KAAE,SAAO,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}